cmake_minimum_required(VERSION 3.12)
project(intersection CXX)
include(../../src/CMakeLists.txt)

if (${PYRTL})
    add_executable(libintersection.so intersection.cpp car_generator.cpp pyrtl-test/traffic_light.cpp)
    _sst_compile_link(libintersection.so)
elseif (${DRIVER})
    add_executable(stoplight.o blackboxes/test_driver.cpp)
    target_link_libraries(stoplight.o SystemC::systemc)
else ()
    add_executable(stoplight.o blackboxes/stoplight_driver.cpp)
    target_link_libraries(stoplight.o SystemC::systemc)

    add_executable(libintersection.so intersection.cpp car_generator.cpp traffic_light.cpp)
    _sst_compile_link(libintersection.so)
endif (${PYRTL})
